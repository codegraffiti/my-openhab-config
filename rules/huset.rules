import org.openhab.core.library.types.*
import org.openhab.core.persistence.*
import org.openhab.model.script.actions.*
import java.lang.Math


rule "Switch of heating if temp for panelovn is ok"
	when
		Time cron "0 0/5 * * * ?" 
	then
		var double t = new Double(power_panelovn.state.toString())
		if (stue_vifteovn.state == ON && t < 10) {
			sendCommand(Heating, OFF)
			pushNotification("Varme","Stua er sÃ¥ varm at vi slo av")	
		}
end

rule "Switch of heating during the week, or when I leave home"
	when
		Time cron "0 0 7 ? * MON-FRI" or
		Item stein_home changed from ON to OFF
	then
		if (stue_panelovn.state == ON || stue_vifteovn.state == ON) {
			sendCommand(Heating, OFF)
			pushNotification("Varme","Varmen skrudd av kl " + Date.state.toString())
		}
end

rule "Heat the livingroom, but only if there are someone at home"
	when
		Time cron "0 30 5 ? * MON-FRI"
	then
		if (stein_home.state == ON) {
			sendCommand(Heating, ON)
			pushNotification("Varme","Varming av stua har startet")
		}
end

rule "Heat in weekends"
	when 
		Time cron "0 0 7 ? * SAT-SUN"
	then
		if (stein_home.state == ON) {
			sendCommand(Heating, ON)
			pushNotification("Varme", "Helgevarming startet")
		}
end	

