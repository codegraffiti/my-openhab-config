import org.openhab.core.library.types.*
import org.openhab.core.persistence.*
import org.openhab.model.script.actions.*

rule "Check garage doors when clicking button"
	when
		Item right_double_switch received command ON	
	then
		postUpdate(push_message_text, "Garagedoors - LEAF: " + garage_door_1.state.toString + ", Mondeo: " + garage_door_2.state.toString)
		callScript('pushMessages')
end

rule "Leaving house"
	when
		Item right_double_switch received command OFF	
	then
		sendCommand(Heating, OFF)
		sendCommand(kontor_panelovn, OFF)
		sendCommand(guest_home, OFF)
		sendCommand(Home, OFF)
		sendCommand(garage_door_1, CLOSED)
		sendCommand(garage_door_2, CLOSED)
		postUpdate(push_message_text, "Bye bye, home status is now: " + Home.state.toString)
		callScript('pushMessages')
end

rule "Alarm is being armed"
	when
		Item router_wlan changed from ON to OFF
	then
		sendCommand(guest_home, OFF)
		sendCommand(Home, OFF)
		postUpdate(push_message_text, "Seems like you left at" + now)
		callScript('pushMessages')
end

rule "Alarm is being disarmed"
	when
		Item router_wlan changed from OFF to ON
	then
		sendCommand(guest_home, ON)
		postUpdate(push_message_text, "Welcome home, home status is: " + Home.state.toString())
		callScript('pushMessages')
end